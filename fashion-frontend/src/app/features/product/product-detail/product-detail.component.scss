// src/app/features/product/product-detail/product-detail.scss
@use '../../../../styles/variables' as v; // <<< IMPORT central variables

// --- General Page Styles ---
.pdp-page-container {
  padding-bottom: 40px;
}

.pdp-main-content {
  &.container {
    max-width: 1200px;
    margin-left: auto;
    margin-right: auto;
    padding-left: 15px;
    padding-right: 15px;
  }
}

.loading-text {
  text-align: center;
  padding: 50px;
  font-size: 1.2rem;
}

.pdp-layout {
  @include v.flex-container(space-between, flex-start); // <<< USE MIXIN from variables
  gap: 30px;

  @media (max-width: v.$tablet-breakpoint) {
    flex-direction: column;
  }
}

// --- Gallery Column (Left) ---
.gallery-column {
  flex: 0 0 60%;
  @include v.flex-container(flex-start, flex-start);
  gap: 15px;

  @media (max-width: v.$tablet-breakpoint) {
    flex-basis: 100%;
    order: 1;
  }

  @media (max-width: v.$mobile-breakpoint) {
    flex-direction: column-reverse;
  }
}

.thumbnails-container {
  @include v.flex-container(flex-start, flex-start, column);
  gap: 10px;
  flex: 0 0 80px;

  @media (max-width: v.$mobile-breakpoint) {
    flex-direction: row;
    overflow-x: auto;
    padding-bottom: 10px;
    width: 100%;
    flex-basis: auto;

    .thumbnail-item {
      flex: 0 0 70px;
    }
  }
}

.thumbnail-item {
  width: 80px;
  height: 80px;
  border: 1px solid v.$color-border-light; // <<< USE VARIABLE
  cursor: pointer;
  overflow: hidden;
  transition: border-color 0.3s ease;

  img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  &.active, &:hover {
    border-color: v.$color-primary;
  }
}

.main-image-container {
  flex-grow: 1;
  border: 1px solid v.$color-border-light;

  img.main-product-image {
    width: 100%;
    height: auto;
    display: block;
  }
}

// --- Details Column (Right) ---
.details-column {
  flex: 0 0 37%;
  font-family: v.$font-family-sans; // <<< USE VARIABLE
  padding-left: 15px;

  &.sticky {
    position: sticky;
  }

  @media (max-width: v.$tablet-breakpoint) {
    flex-basis: 100%;
    order: 2;
    padding-left: 0;

    &.sticky {
      position: static;
      top: auto !important;
      width: auto !important;
    }
  }

  .product-title {
    font-size: 1.8rem;
    font-weight: v.$font-weight-bold;
    margin-bottom: 4px;
    color: v.$color-text-primary;
  }

  .price-section {
    margin-bottom: 20px;

    .price-original {
      text-decoration: line-through;
      color: v.$color-text-secondary;
      font-size: 0.9rem;
      margin-right: 8px;
    }

    .price-current {
      font-size: 1.5rem;
      font-weight: v.$font-weight-bold;
      color: v.$color-text-primary;
    }

    .vat-info {
      font-size: 0.75rem;
      color: v.$color-text-secondary;
      margin-top: 4px;

      a {
        color: v.$color-text-secondary;
        text-decoration: underline;
      }
    }
  }

  .selector-group {
    margin-bottom: 24px;

    label {
      display: block;
      font-size: 0.9rem;
      font-weight: v.$font-weight-bold;
      margin-bottom: 8px;
      color: v.$color-text-primary;

      .selected-value {
        font-weight: v.$font-weight-regular;
        color: v.$color-text-secondary;
      }
    }
  }

  .size-header {
    @include v.flex-container(space-between, center);
    margin-bottom: 8px;

    label {
      margin-bottom: 0;
    }
  }

  .size-guide-link {
    font-size: 0.8rem;
    text-decoration: underline;
    color: v.$color-text-primary;
    font-weight: v.$font-weight-regular;
  }

  .swatches {
    @include v.flex-container(flex-start, center);
    flex-wrap: wrap;
    gap: 8px;

    .swatch {
      min-width: 40px;
      height: 40px;
      padding: 5px;
      border: 1px solid v.$color-border-light;
      background-color: v.$color-white;
      cursor: pointer;
      transition: border-color 0.3s ease;
      font-size: 0.85rem;
      @include v.flex-container(center, center);

      &:hover {
        border-color: v.$color-text-primary;
      }

      &.selected {
        border-color: v.$color-primary;
        border-width: 2px;
      }

      &:disabled, &.out-of-stock {
        opacity: 0.5;
        cursor: not-allowed;
        border-color: v.$color-border-light;
        text-decoration: line-through;

        &:hover {
          border-color: v.$color-border-light;
        }
      }
    }

    .color-swatch {
      width: 50px;
      height: 50px;
      padding: 2px;

      img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
    }
  }

  .low-stock-warning, .out-of-stock-message {
    font-size: 0.8rem;
    color: v.$color-accent-red;
    margin-top: 8px;
    display: block;
  }

  .quantity-selector-group {
    margin-bottom: 24px;

    label {
      display: block;
      font-size: 0.9rem;
      font-weight: v.$font-weight-bold;
      margin-bottom: 8px;
    }

    .quantity-input-wrapper {
      @include v.flex-container(flex-start, center);
      border: 1px solid v.$color-border-light;
      width: fit-content;

      button {
        background: none;
        border: none;
        padding: 10px 12px;
        cursor: pointer;
        font-size: 1rem;

        &:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }
      }

      input[type="number"] {
        width: 40px;
        text-align: center;
        border: none;
        border-left: 1px solid v.$color-border-light;
        border-right: 1px solid v.$color-border-light;
        padding: 10px 0;
        font-size: 0.9rem;
        appearance: textfield;

        &::-webkit-outer-spin-button, &::-webkit-inner-spin-button {
          -webkit-appearance: none;
          margin: 0;
        }
      }
    }
  }

  .actions-row {
    @include v.flex-container(flex-start, stretch);
    gap: 10px;
    margin-bottom: 20px;

    .add-to-cart-btn {
      flex-grow: 1;
      background-color: v.$color-primary;
      color: v.$color-white;
      border: none;
      padding: 12px 20px;
      font-size: 0.9rem;
      font-weight: v.$font-weight-bold;
      text-transform: uppercase;
      cursor: pointer;
      transition: background-color 0.3s ease;

      &:hover:not(:disabled) {
        background-color: darken(v.$color-primary, 10%);
      }

      &:disabled {
        background-color: v.$color-disabled;
        cursor: not-allowed;
      }
    }

    .wishlist-btn {
      flex-shrink: 0;
      width: 50px;
      height: auto;
      @include v.flex-container(center, center);
      border: 1px solid v.$color-border-dark;
      background-color: v.$color-white;
      cursor: pointer;
      transition: all 0.2s ease-in-out;

      .icon-heart {
        width: 24px;
        height: 24px;
        stroke: v.$color-text-primary;
        fill: none;
        stroke-width: 1.5;
        transition: all 0.2s ease-in-out;
      }

      &:hover {
        border-color: v.$color-primary;
        background-color: v.$color-background-light-gray;
      }

      &.is-wishlisted {
        border-color: v.$color-primary;
        background-color: v.$color-primary;

        .icon-heart {
          fill: v.$color-white;
          stroke: v.$color-white;
        }
      }
    }
  }

  .product-details-accordion {
    margin-top: 30px;

    .accordion-item {
      border-bottom: 1px solid v.$color-border-light;

      &:first-child {
        border-top: 1px solid v.$color-border-light;
      }

      .accordion-header {
        width: 100%;
        background: none;
        border: none;
        text-align: left;
        padding: 15px 0;
        font-size: 1rem;
        font-weight: v.$font-weight-bold;
        cursor: pointer;
        @include v.flex-container(space-between, center);
        color: v.$color-text-primary;
      }

      .accordion-content {
        padding: 0 0 15px 0;
        font-size: 0.9rem;
        line-height: 1.6;
        color: v.$color-text-secondary;

        p, ul {
          margin-bottom: 10px;
        }

        ul {
          padding-left: 20px;
        }
      }
    }
  }

  .product-meta {
    font-size: 0.85rem;
    color: v.$color-text-secondary;
    margin-top: 10px;

    a {
      color: v.$color-text-primary;
      text-decoration: underline;

      &:hover {
        color: v.$color-primary;
      }
    }
  }
}
// <<< FIX: Added missing closing brace for .details-column
